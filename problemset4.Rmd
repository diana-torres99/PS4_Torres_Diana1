---
title: "Problem Set #4"
# author: "Diana Torres"
date: "2/1/22"
urlcolor: blue
output: 
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, echo=FALSE, include=FALSE}
knitr::opts_chunk$set(collapse = TRUE, comment = "#>", highlight = TRUE, warning = FALSE, message = FALSE)
```

\textcolor{red}{\textbf{Grade: /30}}   

# Overview

One of the goals for this quarter is to get you comfortable using git and GitHub. In this problem set we will be practicing more git/GitHub workflow basics, manipulating data in R, and creating GitHub issues. We are asking you to create a git repository on your local computer which you will later connect to a remote repository on GitHub. This local repository will have an `.R` file where you will read in data and practice manipulating this data. We recommend doing the reading (e.g. lecture and other required readings) prior to completing the problem set.

Note: In PS3, you created the remote GitHub repo first and then cloned it to your local machine/computer. In this PS, we will create a repo on our local machine/computer first and then connect it to the remote repository. See section 4.2 of the Git and GitHub lecture.

# Part I: Concepts & Definitions

\textcolor{red}{\textbf{/0.5}}

1. What hidden directory is created whenever a git repository is created?

    __ANSWER__: A file names .git/ is created.

\textcolor{red}{\textbf{/1}}

2. Describe what git objects are, what they are identified by, and where they are stored.

    __ANSWER__: Objects are the way data in git is classified into 4 categories, stored, and coded with unique keys, making changes and information about a git project easy to track down.

\textcolor{red}{\textbf{/1.5}}

3. List the 4 types of git objects and define each of them.

    __ANSWER__: A "blob" is used to store file data - it is generally a file.
A "tree" is basically like a directory - it references a bunch of other trees and/or blobs (i.e. files and sub-directories)
A "commit" points to a single tree, marking it as what the project looked like at a certain point in time. It contains meta-information about that point in time, such as a timestamp, the author of the changes since the last commit, a pointer to the previous commit(s), etc.
A "tag" is a way to mark a specific commit as special in some way. It is normally used to tag certain commits as specific releases or something along those lines.


## Part II: Exploring git objects

\textcolor{red}{\textbf{/1}}

1. You'll create a new **RStudio project** for this problem set:

    - Open up **RStudio** and on the top right corner of the window, select `New Project` under the dropdown menu
    - Select `New Directory` then `New Project` to create a new project
    - Name your new project directory `ps4_lastname_firstname` (fill in your name), browse where you want to create the project (e.g., `Downloads` or `Documents` folder, etc.), and click `Create Project`
    - Move this `problemset4.Rmd` you're working on into your newly created `ps4_lastname_firstname` directory 

\textcolor{red}{\textbf{/1}}

2. In your **RStudio Terminal**, run the command that will turn your `ps4_lastname_firstname` directory into a git repository and write the command you used below:

```
# Command to initialize git repository
git init
```

\textcolor{red}{\textbf{/1.5}}

3. Use the `echo` command to output the text `"# YOUR NAME HERE"` (fill in your name) and redirect it using `>` to a file called `problemset4.R`. Then, print the contents of `problemset4.R` to the terminal screen. Write the commands you used here:  

```
# Command to redirect text into `problemset4.R`
echo "#Diana Torres" > problemset4.R

# Command to print contents of `problemset4.R`
cat problemset4.R

```

\textcolor{red}{\textbf{/1.5}}

4. Add `problemset4.R` to the staging area. Then, use a git command to compute the hash ID for `problemset4.R`. Write the commands you used and paste the output you see below:

```
# Command to add `problemset4.R`
git add problemset4.R

# Command to find hash ID for `problemset4.R`
git hash-object problemset4.R

# Output
eb045d31f9e37f183c9562e1a184c0f10e8f88c9

```

\textcolor{red}{\textbf{/2}}

5. Use the hash you obtained in the previous step to find the content, type, and size of the blob object. Write the commands you used and the outputs you got here:

```
# Command to find content of the blob object
git cat-file -p eb045d3

# Output
#Diana Torres

# Command to find type of the blob object
git cat-file -t eb045d3

# Output
blob

# Command to find size of the blob object
git cat-file -s eb045d3

# Output
14

```

\textcolor{red}{\textbf{/1}}

6. Commit the file and check the commit log to obtain the hash ID of the commit:

```
# Command to commit `problemset4.R`
git commit -m "first commit"

# Command to check the commit log
git log

# What is the hash ID of your commit?
d58b15dadb27f3bc179078ba06d0e2e10299a9de

```

\textcolor{red}{\textbf{/2}}

7. Use the hash you obtained in the previous step to find the content, type, and size of the commit object. Write the commands you used and the outputs you got here:

```
# Command to find content of the commit object
git cat-file -p $(git rev-parse HEAD)

# Output
tree 19e5513e60ce29b93f51f8e06dbd62276f4e36ce
parent 398ff9829b87c6dcb26be8b7cd5f6c2a7ff30ce4
author Diana Torres <dianat1161@gmail.com> 1643780979 -0800
committer Diana Torres <dianat1161@gmail.com> 1643780979 -0800

first commit

# Command to find type of the commit object
git cat-file -t $(git rev-parse HEAD)

# Output
commit

# Command to find size of the commit object
git cat-file -s $(git rev-parse HEAD)

# Output
231

```

## Part III: Manipulating data in R

\textcolor{red}{\textbf{/0.5}}

1. Open up your `problemset4.R` file in **RStudio** and erase the comment containing your name at the top of the file. Replace it with a line to import the `tidyverse` library.

\textcolor{red}{\textbf{/1}}

2. Next, you'll be reading in some CSV data directly from the web (i.e., without downloading it first). Navigate to the **Equality of Opportunity Project** data page [here](http://www.equality-of-opportunity.org/data/) and scroll to the **Mobility Report Cards: The Role of Colleges in Intergenerational Mobility** section. Expand the data section and copy the URL for the **Excel** link of **Online Data Table 2**. (_Note_: This is actually a CSV file, not Excel)

    In your `problemset4.R` file, use an R function to directly read in the CSV data using the URL and store it in an object called `mrc`.
 
\textcolor{red}{\textbf{/0.5}}

3. Create a new object called `mrc_subset` based on `mrc` that contains only the following variables: `name, par_q1, par_q2, par_q3, par_q4, par_q5`. Refer to the [codebook](http://www.equality-of-opportunity.org/data/college/Codebook%20MRC%20Table%202.pdf) to see what these variables mean.

\textcolor{red}{\textbf{/2}}

4. Create another object called `mrc_pivot` based on `mrc_subset` that pivots the table from wide to long such that:

    - There are 3 columns in the pivoted table called: `name`, `quintile`, `fraction`
    - The `name` column should just be the same `name` variable from the original `mrc_subset` table
    - The `quintile` column should contain the following values obtained from the column names of `mrc_subset`: `q1`, `q2`, `q3`, `q4`, `q5` (_Note that we want to drop the `par_` prefix_)
    - The `fraction` column should contain the corresponding values for each quintile

\textcolor{red}{\textbf{/1}}

5. Add and commit your `problemset4.R` file.
git add problemset4.R
git commit -m "commit problemset4.R"

# Part IV: Practice with git

\textcolor{red}{\textbf{/2}}

1. Let's make some more changes to `problemset4.R`. Modify `problemset4.R` by adding a comment at the end of your file where you write down your guilty pleasure. Add the file to the staging area.

    Now let's say you are having second thoughts about committing this change. What command would you use to unstage this file?

```

# Command to use to unstage `problemset4.R` after you've added it
git reset HEAD problemset4.R
```

\textcolor{red}{\textbf{/2}}

2. But in the end, you decide to go ahead and commit this change anyway. Re-add `problemset4.R` to the staging area and make a commit with the message `my guilty pleasure`.

    You regret it instantly! You remember that `git reset` and `git revert` are two commands to undo changes from a commit. What is the difference between them?
    
    __ANSWER__: git revert does not remove any previous commits. It creates a new commit that changes things back to the way they were prior to some commit (logs that a commit was reverted).
git reset removes a previous commit, so there will be no record of this commit in git log.

\textcolor{red}{\textbf{/1}}

3. Let's say you decided to use `git revert`. Revert the `my guilty pleasure` commit and write the command you used below. (_Hint_: Include the `--no-edit` option to use default commit message)

```
# Command to revert your `my guilty pleasure` commit
git revert --no-edit $(git rev-parse --short HEAD)
```

\textcolor{red}{\textbf{/2}}

4. Now, head over to GitHub in your browser and create a new private repository in the `anyone-can-cook` organization [here](https://github.com/organizations/anyone-can-cook/repositories/new). Name your repo `ps4_lastname_firstname` (fill in your name) and do **NOT** initialize it with a `README.md` or `.gitignore` file.

\textcolor{red}{\textbf{/3}}

5. Connect your local `ps4_lastname_firstname` repository to the remote and push your changes. (_Hint_: Refer to Section 4.2 in the lecture)

```
# Command to add remote repository
git remote add https://github.com/anyone-can-cook/ps4_Torres_Diana.git

# Command to push to remote

```

## Part V: Create a GitHub issue   

\textcolor{red}{\textbf{/2}}

- Go to the [class repository](https://github.com/anyone-can-cook/rclass2_w22_student_issues/issues) and create a new issue.
- You can either:
  - Ask a question that you have about this problem set or the course in general. Make sure to assign the instructors (@ozanj, @lizachavac, @briannawright135) and mention your team (e.g., @anyone-can-cook/your_team_name).
  - Share something you learned from this problem set or the course. Please mention your team (e.g., @anyone-can-cook/your_team_name).
- You are also required to respond to at least one issue posted by another student.

- Paste the url to your issue here: 
- Paste the url to the issue you responded to here: 

# Knit to pdf and submit problem set  

**Knit to pdf** by clicking the "Knit" button near the top of your RStudio window (icon with blue yarn ball) or drop down and select "Knit to PDF"

You will submit this problem set by pushing it to your repository. Make sure to push both the `.Rmd` and `.pdf` files.
